<HTML>
<HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<TITLE> амера от третьего лица</TITLE>
<LINK href="../data/style.css" type=text/css rel=stylesheet>
</HEAD>
<BODY>

<DIV ALIGN=justify>

<H1 class=pagetitle> амера от третьего лица</H1>

<A><B>”ровень:</B> средний<A>
<BR><A><B>¬ерси€ Xtreme3D:</B> 3.0.x</A><A>
<BR>
<BR>ћногие игры используют вид от третьего лица, где камера показывает персонажа "со спины" - это, например, многие игры жанров Action и RPG, 3D-платформеры типа Spyro или Crash Bandicoot, спортивные симул€торы и т.д. ѕри этом, как правило, камера не €вл€етс€ жестко зафиксированной на определенном рассто€нии от персонажа - она обычно перемещаетс€ плавно, с некоторым запаздыванием, что добавл€ет реализма и кинематографичности. 
<BR>
<BR>Ќа Xtreme3D подобную механику реализовать ненамного сложнее, чем вид от первого лица. Ќижеследующий код создаст иерархию из персонажа, которым игрок будет управл€ть, и камеры, котора€ будет за ним следить. ¬ качестве условного персонажа используетс€ простой куб.
<BR>
<BR> од в событии Create:
<BR>
<BR>camera = <A class=func2link href=../functions/camera.htm#CameraCreate>CameraCreate</A>(<B>global</B>.scene);
<BR><A class=func2link href=../functions/camera.htm#CameraSetViewDepth>CameraSetViewDepth</A>(camera, 800);
<BR><A class=func2link href=../functions/camera.htm#CameraSetFocal>CameraSetFocal</A>(camera, 80);
<BR><A class=func2link href=../functions/viewer.htm#ViewerSetCamera>ViewerSetCamera</A>(view1, camera);
<BR>
<BR>actor = <A class=func2link href=../functions/primitives.htm#CubeCreate>CubeCreate</A>(1, 1, 1, <B>global</B>.scene);
<BR>
<BR>target = <A class=func2link href=../functions/dummycube.htm#DummycubeCreate>DummycubeCreate</A>(actor);
<BR><A class=func2link href=../functions/object.htm#ObjectSetPosition>ObjectSetPosition</A>(target, 0, 1, -4);
<BR><A class=func2link href=../functions/camera.htm#CameraSetTargetObject>CameraSetTargetObject</A>(camera, actor);
<BR>
<BR> од в событии Step:
<BR>
<BR><B>if</B> <A class=type>keyboard_check</A>(<A class=constant>vk_up</A>) <A class=func2link href=../functions/object.htm#ObjectMove>ObjectMove</A>(actor, 10 * dt);
<BR><B>if</B> <A class=type>keyboard_check</A>(<A class=constant>vk_down</A>) <A class=func2link href=../functions/object.htm#ObjectMove>ObjectMove</A>(actor, -10 * dt);
<BR><B>if</B> <A class=type>keyboard_check</A>(<A class=constant>vk_left</A>) <A class=func2link href=../functions/object.htm#ObjectTurn>ObjectTurn</A>(actor, -200 * dt);
<BR><B>if</B> <A class=type>keyboard_check</A>(<A class=constant>vk_right</A>) <A class=func2link href=../functions/object.htm#ObjectTurn>ObjectTurn</A>(actor, 200 * dt);
<BR>
<BR>cx = <A class=func2link href=../functions/object.htm#ObjectGetAbsolutePosition>ObjectGetAbsolutePosition</A>(camera, 0);
<BR>cy = <A class=func2link href=../functions/object.htm#ObjectGetAbsolutePosition>ObjectGetAbsolutePosition</A>(camera, 1);
<BR>cz = <A class=func2link href=../functions/object.htm#ObjectGetAbsolutePosition>ObjectGetAbsolutePosition</A>(camera, 2);
<BR>tx = <A class=func2link href=../functions/object.htm#ObjectGetAbsolutePosition>ObjectGetAbsolutePosition</A>(target, 0);
<BR>ty = <A class=func2link href=../functions/object.htm#ObjectGetAbsolutePosition>ObjectGetAbsolutePosition</A>(target, 1);
<BR>tz = <A class=func2link href=../functions/object.htm#ObjectGetAbsolutePosition>ObjectGetAbsolutePosition</A>(target, 2);
<BR>dx = tx - cx;
<BR>dy = ty - cy;
<BR>dz = tz - cz;
<BR><A class=func2link href=../functions/object.htm#ObjectTranslate>ObjectTranslate</A>(camera, dx * 0.05, dy * 0.05, dz * 0.05);
<BR>
<BR>Ћогика камеры устроена так, что ее наиболее дальн€€ дистанци€ от персонажа - при движении вперед (чтобы можно было хорошо видеть, что творитс€ вокруг), а сама€ близка€ - при движении назад. ѕри повороте персонажа камера позвол€ет рассмотреть его сбоку. ѕримерно такой же прием используетс€ в гоночных симул€торах, так что на основе этого кода вполне можно сделать и движок гонок.

</DIV>

</BODY>
</HTML>